## Demo #1

В целом тут показано, как я решаю задачу в обычном для меня флоу.

Есть некий use case и его надо решить... 

Немного не по задаче, но давайте себе представим, что уже есть какой-то проект. 
В нем есть какие-то модели, база уже чем-то заполнена. Есть даже какой-то один контроллер,
который возвращает список гидов. 

## Use Case UC-001: Создание бронирования охотничьего тура ##

### Описание ###
Позволяет пользователю создать новое бронирование охотничьего тура с выбранным гидом на конкретную дату.

### Основной поток ###

Запрос на создание: Пользователь отправляет POST запрос на /api/bookings с данными бронирования

Валидация данных: Система проверяет корректность всех обязательных полей

Проверка гида: Система убеждается, что выбранный гид существует и активен

Проверка доступности: Система проверяет, что у гида нет других бронирований на указанную дату

Проверка участников: Система проверяет, что количество участников не превышает лимит в 10 человек

Создание бронирования: Система создает запись бронирования в базе данных

Успешный ответ: Система возвращает данные созданного бронирования

### Альтернативные потоки ###
A1: Гид не найден
Условие: Указанный guide_id не существует в системе

Действие: Возврат ошибки валидации

HTTP статус: 400 Bad Request

A2: Гид недоступен на дату
Условие: У выбранного гида уже есть бронирование на указанную дату

Действие: Возврат ошибки валидации

HTTP статус: 400 Bad Request

A3: Превышено количество участников
Условие: Количество участников превышает максимальный лимит (10 человек)

Действие: Возврат ошибки валидации

HTTP статус: 400 Bad Request

A4: Гид неактивен
Условие: Выбранный гид помечен как неактивный (is_active = false)

Действие: Возврат ошибки валидации

HTTP статус: 400 Bad Request

## Запрос ##
curl -L 'http://localhost:8001/api/bookings' \
-d '{
"tour_name": "Elk Hunting Tour",
"hunter_name": "John Doe",
"guide_id": 2,
"date": "2024-12-25",
"participants_count": 4
}'


## Docker ##
В целом я поднимал это для локального использования. Не особо долго над этим думая. 
Не подойдет для, например, gitlab ci. Но что нужно сделать: проверить все порты сервисов nginx и mysql.
Mysql выбран случайно. Просто под рукой что-то оказалось. Может, позже на что-то более адекватное перейду
Ну, и нет всяких очередей, редисов и тому подобного.

## Как запустить ##
- git clone
- docker compose -f .\docker\docker-compose.yml -p demo-1 up -d
- после того, как контейнеры стартовали, нужно зайти в контейнер  app: docker exec -it demo_1_app /bin/bash
- в контейнере выполнить composer update, например
- в контейнере выполнить php artisan php artisan key:generate
- в контейнере выполнить php artisan migrate
- в контейнере выполнить php artisan db:seed


## В целом не делал ##
- Метод апи не отдает айди созданного бронирования
- Кстати, айди бы переделать не как автоинкрементарные, а как guid
- Это просто для примера все.

## Интеграция с Core ##
В целом это решение не DDD. Не понимаю, как можно реализовывать DDD без UoW. 
В рамках laravel делать UoW как-то такое себе.
Поэтому буду считать, что Core - это то, что есть в app.
На данный момент - это модели и какие-то эксепшены.
Поэтому для примера связанность модулей происходит на уровне данных - моделей.
